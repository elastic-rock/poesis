<nav>
    <div id="navbar" class="fixed top-0 w-full z-30 bg-neutral-900">
        <div class="mx-auto max-w-7xl ps-4 sm:ps-8 pe-6 sm:pe-8 py-5">
            <div class="flex items-center justify-between">
                <a class="flex flex-row gap-4 items-center font-semibold" href="/">
                    <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#FFFFFF"><path d="M320.67-160q-27 0-46.84-19.83Q254-199.67 254-226.67V-300q0-14.17 9.58-23.75 9.59-9.58 23.75-9.58h89.34V-448q-34 1.33-66.84-10.17Q277-469.67 251-492q-5.38-5.05-8.53-11.36-3.14-6.31-3.14-13.64v-38.33h-35q-6.37 0-12.35-2.34-5.98-2.33-11.31-7.66l-95.34-95.34q-10.66-10.66-10.33-25 .33-14.33 11.67-23.66 31-27 77-41.5t87-14.5q29 0 63.16 7.66Q348-750 376.67-732.33v-9.34q0-24.39 16.97-41.36T435-800h338.33q27.5 0 47.09 19.58Q840-760.83 840-733.33V-270q0 45.83-32.08 77.92Q775.83-160 730-160H320.67Zm122.66-173.33h210q14.17 0 23.75 9.58 9.59 9.58 9.59 23.75v30q0 19 12.16 31.17Q711-226.67 730-226.67t31.17-12.16Q773.33-251 773.33-270v-463.33h-330v46l231 231q8.34 8.33 9.67 17.83 1.33 9.5-2.33 18.5-3.67 9-11.32 14.83-7.65 5.84-19.55 5.84-6.8 0-12.97-2.5-6.16-2.5-11.16-7.5l-112-112-14 16q-13.34 14.66-27.17 23.66-13.83 9-30.17 15.67v132.67ZM220-622h52.67q14.16 0 23.75 9.58 9.58 9.59 9.58 23.75V-534q15.33 10 30.5 14.67 15.17 4.66 31.5 4.66 24.33 0 47.83-11.33t37.5-26.67l14-16-64.66-64.66q-31-31-69.55-48.17t-82.45-17.17q-24.67 0-45.34 5.34-20.66 5.33-42 14.66L220-622Zm400 355.33H320.67v40h310.66q-5-7-8.16-17.33-3.17-10.33-3.17-22.67Zm-299.33 40v-40 40Z"/></svg>
                    Poesis
                </a>
                <div class="hidden sm:flex gap-8 font-semibold items-center">
                    <a class="hover:underline" href="/contribute">Contribute</a>
                    <a class="hover:underline" href="/license">License</a>
                    <div class="flex flex-row items-center rounded-full border-neutral-500 border-2">
                        <input id="searchInput" type="text" placeholder="Search" class="bg-transparent py-2 px-4 outline-hidden placeholder-neutral-500"/>
                        <button id="searchBtn" aria-label="Search" class="py-2 px-4">
                            <svg id="searchIcon" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#737373"><path d="M380-320q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l224 224q11 11 11 28t-11 28q-11 11-28 11t-28-11L532-372q-30 24-69 38t-83 14Zm0-80q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>
                        </button>
                    </div>
                </div>
                <div class="sm:hidden">
                    <button id="menuBtn" type="button" aria-label="Hamburger menu cursor-pointer">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path id="btnIcon" d="M160-240q-17 0-28.5-11.5T120-280q0-17 11.5-28.5T160-320h640q17 0 28.5 11.5T840-280q0 17-11.5 28.5T800-240H160Zm0-200q-17 0-28.5-11.5T120-480q0-17 11.5-28.5T160-520h640q17 0 28.5 11.5T840-480q0 17-11.5 28.5T800-440H160Zm0-200q-17 0-28.5-11.5T120-680q0-17 11.5-28.5T160-720h640q17 0 28.5 11.5T840-680q0 17-11.5 28.5T800-640H160Z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="dropdown" class="fixed hidden sm:hidden top-0 z-20 right-0 w-full h-full bg-neutral-900">
        <div class="flex flex-col left-0 top-24 absolute w-full px-4 gap-4 font-semibold">
            <div class="flex flex-row items-center rounded-full border-neutral-500 border-2">
                <input id="searchInputMobile" type="text" placeholder="Search" class="bg-transparent py-2 px-4 outline-hidden placeholder-neutral-500 w-full"/>
                <button id="searchBtnMobile" aria-label="Search" class="py-2 px-4">
                    <svg id="searchIconMobile" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#737373"><path d="M380-320q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l224 224q11 11 11 28t-11 28q-11 11-28 11t-28-11L532-372q-30 24-69 38t-83 14Zm0-80q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>
                </button>
            </div>
            <a class="ps-4 pt-2 hover:underline" href="/contribute">Contribute</a>
            <a class="ps-4 hover:underline" href="/license">License</a>
        </div>
    </div>

    <script nonce="{{nonce}}">
        const btn = document.getElementById("menuBtn");
        const navbar = document.getElementById("navbar");
        const dropdown = document.getElementById("dropdown");
        const btnIcon = document.getElementById("btnIcon");
        const searchInput = document.getElementById("searchInput");
        const searchBtn = document.getElementById("searchBtn");
        const searchIcon = document.getElementById("searchIcon");
        const searchInputMobile = document.getElementById("searchInputMobile");
        const searchBtnMobile = document.getElementById("searchBtnMobile");
        const searchIconMobile = document.getElementById("searchIconMobile");

        btn.addEventListener("click", (event) => {
            if (dropdown.classList.contains("hidden")==true){
                dropdown.classList.remove("hidden")
                document.body.classList.add("stop-scrolling")
                btnIcon.setAttribute("d", "M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z");
            } else {
                dropdown.classList.add("hidden")
                if (window.scrollY==0){
                }
                document.body.classList.remove("stop-scrolling")
                btnIcon.setAttribute("d", "M160-240q-17 0-28.5-11.5T120-280q0-17 11.5-28.5T160-320h640q17 0 28.5 11.5T840-280q0 17-11.5 28.5T800-240H160Zm0-200q-17 0-28.5-11.5T120-480q0-17 11.5-28.5T160-520h640q17 0 28.5 11.5T840-480q0 17-11.5 28.5T800-440H160Zm0-200q-17 0-28.5-11.5T120-680q0-17 11.5-28.5T160-720h640q17 0 28.5 11.5T840-680q0 17-11.5 28.5T800-640H160Z");
            }
        });

        function submitSearch(query) {
            if (query) {
                const encodedQuery = encodeURIComponent(query);
                window.location.href = `/search?q=${encodedQuery}`;
            }
        }

        function keydown(event, query) {
            if (event.key === 'Enter') {
                submitSearch(query);
            }
        }

        searchBtn.addEventListener("click", (event) => {
            const query = searchInput.value.trim().toLowerCase().split(' ').join('+');
            submitSearch(query);
        });

        searchInput.addEventListener("keydown", (event) => {
            const query = searchInput.value.trim();
            keydown(event, query);
        });

        searchInput.addEventListener("input", function() {
            const query = searchInput.value.trim();
            if (query !== '') {
                searchIcon.setAttribute("fill", "#FFFFFF");
                searchIcon.classList.add("cursor-pointer");
            } else {
                searchIcon.setAttribute("fill", "#737373");
                searchIcon.classList.remove("cursor-pointer");
            }
        });

        searchBtnMobile.addEventListener("click", (event) => {
            const query = searchInputMobile.value.trim().toLowerCase().split(' ').join('+');
            submitSearch(query);
        });

        searchInputMobile.addEventListener("keydown", (event) => {
            const query = searchInputMobile.value.trim();
            keydown(event, query);
        });

        searchInputMobile.addEventListener("input", function() {
            const query = searchInputMobile.value.trim();
            if (query !== '') {
                searchIconMobile.setAttribute("fill", "#FFFFFF");
                searchIconMobile.classList.add("cursor-pointer");
            } else {
                searchIconMobile.setAttribute("fill", "#737373");
                searchIconMobile.classList.remove("cursor-pointer");
            }
        });
    </script>
</nav>